---
description: 
globs: 
alwaysApply: false
---
# ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒ«ãƒ¼ãƒ«

## ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ¦‚è¦
Next.js 15 + Supabase + Netlify + Stripe ã‚’ä½¿ç”¨ã—ãŸã‚¢ãƒ¼ãƒˆä½œå“è²©å£²ã‚µã‚¤ãƒˆã®æ§‹ç¯‰ã‚¬ã‚¤ãƒ‰  
è©³ç´°ã¯ `requirements.md` ã‚’å‚ç…§

## æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯
- **Next.js 15**: App Router + React 19å¯¾å¿œ
- **Netlify**: OpenNext adapterä½¿ç”¨ã€Edge Functionså¯¾å¿œ
- **Supabase**: Database, Auth, Storage
- **Stripe**: æ±ºæ¸ˆå‡¦ç†
- **shadcn/ui v2**: UIã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ

## åˆ©ç”¨å¯èƒ½ãªMCPã‚µãƒ¼ãƒãƒ¼
- **Supabase MCP**: Supabaseãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ç®¡ç†ã€ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹æ“ä½œã€ã‚¨ãƒƒã‚¸ãƒ•ã‚¡ãƒ³ã‚¯ã‚·ãƒ§ãƒ³ç­‰ã®ç›´æ¥æ“ä½œãŒå¯èƒ½
- **Context7 MCP**: ãƒ©ã‚¤ãƒ–ãƒ©ãƒªãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã®æ¤œç´¢ãƒ»å–å¾—ã«ã‚ˆã‚‹æœ€æ–°ã®æŠ€è¡“æƒ…å ±ã‚¢ã‚¯ã‚»ã‚¹

## è‡ªå‹•ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆç®¡ç†

### å®Ÿè¡Œå†…å®¹
- ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆï¼ˆ`requirements.md`ã€`docs/`ãƒ•ã‚©ãƒ«ãƒ€ç­‰ï¼‰ã®å®šæœŸãƒã‚§ãƒƒã‚¯ãƒ»æ›´æ–°
- æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯ï¼ˆNext.js 15ã€React 19ã€Supabaseã€Netlifyã€Stripeï¼‰ã®æœ€æ–°æƒ…å ±åæ˜ 
- MCPï¼ˆSupabase MCPã€Context7 MCPï¼‰ã‚’æ´»ç”¨ã—ãŸæŠ€è¡“æƒ…å ±ã®è‡ªå‹•åé›†ãƒ»æ›´æ–°
- Next.js 15å›ºæœ‰ã®ç ´å£Šçš„å¤‰æ›´ãƒ»æ–°æ©Ÿèƒ½ã¸ã®å¯¾å¿œ
- ãƒªãƒ³ã‚¯åˆ‡ã‚Œã‚„æƒ…å ±ã®å¤ã•ã‚’æ¤œå‡ºãƒ»ä¿®æ­£

### æ›´æ–°ãƒˆãƒªã‚¬ãƒ¼
- **ã‚³ãƒ¼ãƒ‰å¤‰æ›´æ™‚**: å®Ÿè£…ã¨ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã®æ•´åˆæ€§ç¢ºèª
- **å¤–éƒ¨ã‚µãƒ¼ãƒ“ã‚¹å¤‰æ›´æ™‚**: æ–™é‡‘ãƒ»åˆ©ç”¨è¦ç´„ãƒ»APIå¤‰æ›´ã®åæ˜ 
- **æœˆæ¬¡ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹**: å…¨ä½“çš„ãªãƒ¬ãƒ“ãƒ¥ãƒ¼ã¨æ›´æ–°
- **MCPæƒ…å ±æ›´æ–°æ™‚**: å„MCPã‚µãƒ¼ãƒãƒ¼ã‹ã‚‰ã®æœ€æ–°æƒ…å ±åæ˜ 

### é‡ç‚¹ç›£è¦–é …ç›®
- ğŸ“Š **æ–™é‡‘æƒ…å ±**: å„ã‚µãƒ¼ãƒ“ã‚¹ã®ç„¡æ–™åˆ©ç”¨æ åˆ¶é™
- ğŸ“‹ **åˆ©ç”¨è¦ç´„**: Netlifyã®å•†ç”¨åˆ©ç”¨å¯èƒ½æ€§ç¢ºèª
- ğŸ”§ **APIå¤‰æ›´**: Next.js 15ã€React 19ã®æ–°æ©Ÿèƒ½ãƒ»éæ¨å¥¨æ©Ÿèƒ½
- ğŸ”’ **ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£**: è„†å¼±æ€§ãƒ»æ–°è¦ä»¶
- ğŸ¤– **MCPæ©Ÿèƒ½**: Supabase MCPã€Context7 MCPã®æ–°æ©Ÿèƒ½ãƒ»å¤‰æ›´ç‚¹
- âš¡ **ç ´å£Šçš„å¤‰æ›´**: Next.js 15ã®PromiseåŒ–APIã€ã‚­ãƒ£ãƒƒã‚·ãƒ¥å‹•ä½œå¤‰æ›´

### ç·Šæ€¥å¯¾å¿œé …ç›®
- ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£è„†å¼±æ€§
- é‡è¦ãªAPIå»ƒæ­¢
- åˆ©ç”¨è¦ç´„ã®é‡å¤§å¤‰æ›´
- æ–™é‡‘ä½“ç³»ã®å¤§å¹…å¤‰æ›´

### æ›´æ–°åŸå‰‡
- å…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆå„ªå…ˆ
- MCPã‚µãƒ¼ãƒãƒ¼ã‹ã‚‰ã®æƒ…å ±æ´»ç”¨
- ç›¸äº’å‚ç…§ãƒªãƒ³ã‚¯ã®æ•´åˆæ€§ç¶­æŒ
- å¤‰æ›´ç†ç”±ã¨æ—¥ä»˜ã®è¨˜éŒ²

å…·ä½“çš„ãªæ›´æ–°å¯¾è±¡ãƒ•ã‚¡ã‚¤ãƒ«ã‚„è©³ç´°ãªãƒã‚§ãƒƒã‚¯é …ç›®ã¯ `docs/` ãƒ•ã‚©ãƒ«ãƒ€å†…ã®å„ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚’å‚ç…§ã—ã¦ãã ã•ã„ã€‚

## Next.js 15 å®Ÿè£…ã‚¬ã‚¤ãƒ‰ãƒ©ã‚¤ãƒ³

### å¿…é ˆå¯¾å¿œäº‹é …
1. **éåŒæœŸAPIå¯¾å¿œ**
   ```typescript
   // âŒ Next.js 14ä»¥å‰
   export default function Page({ params, searchParams }) {
     const { slug } = params
     const { query } = searchParams
   }
   
   // âœ… Next.js 15
   export default async function Page(props) {
     const params = await props.params
     const searchParams = await props.searchParams
     const { slug } = params
     const { query } = searchParams
   }
   ```

2. **Route Handlers**
   ```typescript
   // âœ… ã‚­ãƒ£ãƒƒã‚·ãƒ¥ãŒå¿…è¦ãªå ´åˆ
   export const dynamic = 'force-static'
   export async function GET() {
     // GETå‡¦ç†
   }
   ```

3. **Headers/Cookies**
   ```typescript
   // âœ… Next.js 15å¯¾å¿œ
   import { headers, cookies } from 'next/headers'
   
   export default async function Component() {
     const headersList = await headers()
     const cookieStore = await cookies()
   }
   ```

### Netlifyå¯¾å¿œè¨­å®š
- OpenNext adapterãŒè‡ªå‹•é©ç”¨
- Image CDNè‡ªå‹•æœ€é©åŒ–
- Edge Functionså¯¾å¿œï¼ˆMiddlewareï¼‰
- ç’°å¢ƒå¤‰æ•°è¨­å®šå¿…é ˆï¼šNEXT_PUBLIC_SUPABASE_URL, STRIPE_SECRET_KEYç­‰

### æ¨å¥¨ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹é€ ï¼ˆNext.js 15 App Routerï¼‰
```
src/app/
â”œâ”€â”€ layout.tsx          # Root Layout
â”œâ”€â”€ page.tsx           # ãƒ›ãƒ¼ãƒ ãƒšãƒ¼ã‚¸
â”œâ”€â”€ about/page.tsx     # ã‚¢ãƒ¼ãƒ†ã‚£ã‚¹ãƒˆç´¹ä»‹
â”œâ”€â”€ gallery/page.tsx   # ä½œå“ä¸€è¦§
â”œâ”€â”€ artwork/
â”‚   â””â”€â”€ [slug]/page.tsx # å€‹åˆ¥ä½œå“ãƒšãƒ¼ã‚¸
â”œâ”€â”€ api/
â”‚   â”œâ”€â”€ artworks/route.ts
â”‚   â””â”€â”€ webhooks/stripe/route.ts
â””â”€â”€ globals.css
```

### ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æœ€é©åŒ–
- `next/image`ã§Netlify Image CDNæ´»ç”¨
- Server Componentså„ªå…ˆä½¿ç”¨
- å¿…è¦ãªç®‡æ‰€ã®ã¿Client ComponentsåŒ–
- Suspenseå¢ƒç•Œã®é©åˆ‡ãªé…ç½®









